<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Github Hack Project</title>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>
<body>
	<h1>Github Hax!</h1>

<script>

$(function(){
	var commitCount = 0;

	var ajaxCall = function(name, pageNumber) {
		var githubApiCall = 'https://api.github.com/users/'+name+'/received_events/public?page=' + pageNumber;
		return $.ajax({ url: githubApiCall }).success(function(response){
			var filteredEvents = $.grep(response, function(n) {
				return n['type'] === 'PushEvent';
			});
			filteredEvents.forEach(function(pushEvent){
				var commits = pushEvent.payload.commits.length;
				commitCount += commits;
				console.log(pushEvent, commits);
			});
		});
	};

	var deferredObjects = [];
	for (var i = 1; i <= 10; i++){
		deferredObjects.push(ajaxCall('zachlysobey', i));
	}

	$.when.apply($, deferredObjects).done(function(){
		alert(commitCount);
	});

});

</script>
</body>
</html>
